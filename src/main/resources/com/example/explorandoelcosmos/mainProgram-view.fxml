<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane fx:id="rootStackPane"
           xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.example.explorandoelcosmos.controllers.MainProgramController"
           prefHeight="800.0" prefWidth="1200.0"
           styleClass="root" stylesheets="@styles.css">

    <ScrollPane fx:id="contentScrollPane" styleClass="ocular-pane"
                fitToWidth="true" fitToHeight="true"
                vbarPolicy="AS_NEEDED" hbarPolicy="NEVER"
                maxWidth="650.0" maxHeight="650.0">

        <content>
            <StackPane alignment="CENTER" style="-fx-background-color: transparent;">

                <GridPane fx:id="contentContainer" hgap="15" vgap="15" alignment="CENTER">
                    <padding>
                        <Insets top="20" bottom="20" left="20" right="20"/>
                    </padding>
                </GridPane>

            </StackPane>
        </content>
    </ScrollPane>

    <AnchorPane pickOnBounds="false">
        <VBox alignment="CENTER" spacing="10" AnchorPane.leftAnchor="50" AnchorPane.topAnchor="150">
            <Label text="Seleccionar API:" styleClass="form-text"/>
            <ComboBox fx:id="apiComboBox" prefWidth="150"/>
            <Button text="Cargar API" onAction="#handleLoadSelectedApi" styleClass="form-button"/>
        </VBox>

        <Label fx:id="btnFavoritos" text="★&#10;Favoritos" styleClass="celestial-button" AnchorPane.rightAnchor="50"
               AnchorPane.topAnchor="180" onMouseClicked="#handleFilterFavoritos"/>

        <Label fx:id="btnReports" text="Generar&#10;Reporte" styleClass="celestial-button" AnchorPane.rightAnchor="50"
               AnchorPane.bottomAnchor="180" onMouseClicked="#handleReportsClick"/>

        <VBox alignment="CENTER" spacing="10" AnchorPane.topAnchor="20.0" AnchorPane.rightAnchor="20.0">
            <ToggleButton fx:id="offlineModeToggle" text="Modo Offline"/>
        </VBox>

        <VBox alignment="CENTER" spacing="10" AnchorPane.bottomAnchor="20.0" AnchorPane.leftAnchor="0"
              AnchorPane.rightAnchor="0">

            <VBox fx:id="filterPane" spacing="10" alignment="CENTER" styleClass="filter-pane" visible="false" managed="false" maxWidth="500">
                <padding><Insets top="10" right="20" bottom="10" left="20"/></padding>
                <GridPane hgap="10" vgap="10" alignment="CENTER">
                    <Label text="Año Inicial:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="yearStartComboBox" prefWidth="120" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                    <Label text="Año Final:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                    <ComboBox fx:id="yearEndComboBox" prefWidth="120" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                </GridPane>
                <Button text="Buscar" onAction="#handleAdvancedSearch" styleClass="form-button"/>
            </VBox>

            <VBox fx:id="progressBox" spacing="5" visible="false" managed="false" maxWidth="400" alignment="CENTER">
                <Label fx:id="progressLabel" text="Generando reporte..."/>
                <ProgressBar fx:id="progressBar" prefWidth="Infinity"/>
            </VBox>
            <TextField fx:id="searchField" promptText="Buscar en la fuente activa..." styleClass="search-field" maxWidth="400"/>
            <HBox alignment="CENTER" spacing="30" prefHeight="40.0">
                <Label fx:id="userDataLabel" text="Usuario: [nombre]" style="-fx-text-fill: #888;"/>
                <MenuButton fx:id="menuButton" text="OPCIONES" styleClass="link-button">
                    <items>
                        <MenuItem text="Cerrar Sesión" onAction="#handleCerrarSesion"/>
                        <MenuItem text="Editar Perfil" onAction="#handleEditarPerfil"/>
                        <MenuItem text="Acerca de..." onAction="#handleAcercaDe"/>
                    </items>
                </MenuButton>
            </HBox>
        </VBox>
    </AnchorPane>

</StackPane>